[gd_scene load_steps=12 format=3 uid="uid://bwo1h0dai4hi2"]

[ext_resource type="Script" uid="uid://crlmeipo4b1bf" path="res://objects/spider/spider.gd" id="1_nn63r"]
[ext_resource type="PackedScene" uid="uid://gyc0wxdnr7cp" path="res://objects/spider/spider_body.tscn" id="2_6wu3h"]
[ext_resource type="Texture2D" uid="uid://bydu0pcscub3i" path="res://scenes/test/spider/textures/spider_vision.png" id="4_bgy4a"]
[ext_resource type="Script" uid="uid://b7wusafqlq13d" path="res://objects/spider/states/stickbug.gd" id="7_8716e"]
[ext_resource type="AudioStream" uid="uid://ua3r53w1tyol" path="res://assets/sounds/creature_walking.mp3" id="8_ob8v4"]
[ext_resource type="Script" uid="uid://bocxaq4w6ugux" path="res://objects/spider/states/hide.gd" id="9_bgy4a"]
[ext_resource type="Script" uid="uid://duesftkc012jb" path="res://objects/spider/spider_move_component.gd" id="13_ob8v4"]
[ext_resource type="Script" uid="uid://jihwj7nslsfl" path="res://objects/state_machine.gd" id="13_qaxsg"]
[ext_resource type="Script" uid="uid://dk2tyvtmwtg3y" path="res://objects/spider/states/idle.gd" id="14_ob8v4"]
[ext_resource type="Script" uid="uid://cd3syv04h3k15" path="res://objects/spider/states/move.gd" id="15_8716e"]

[sub_resource type="CircleShape2D" id="CircleShape2D_nn63r"]
radius = 113.49

[node name="Spider" type="CharacterBody2D"]
motion_mode = 1
script = ExtResource("1_nn63r")

[node name="SpiderBody" parent="." instance=ExtResource("2_6wu3h")]

[node name="LightVisionCone" type="PointLight2D" parent="."]
position = Vector2(10.856, -3.92986e-05)
energy = 0.21
shadow_enabled = true
shadow_filter = 2
shadow_filter_smooth = 0.5
texture = ExtResource("4_bgy4a")
offset = Vector2(409.6, 0)
texture_scale = 0.8
height = 179.0

[node name="SpiderCollisionShape" type="CollisionShape2D" parent="."]
unique_name_in_owner = true
shape = SubResource("CircleShape2D_nn63r")

[node name="MoveComponent" type="Node" parent="."]
script = ExtResource("13_ob8v4")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("13_qaxsg")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("move_state", "stickbug_state", "hide_state")]
script = ExtResource("14_ob8v4")
move_state = NodePath("../Move")
stickbug_state = NodePath("../Stickbug")
hide_state = NodePath("../Hide")
metadata/_custom_type_script = "uid://c0lhfaavm4i0o"

[node name="Stickbug" type="Node" parent="StateMachine" node_paths=PackedStringArray("move_state", "idle_state", "hide_state")]
script = ExtResource("7_8716e")
move_state = NodePath("../Move")
idle_state = NodePath("../Idle")
hide_state = NodePath("../Hide")
metadata/_custom_type_script = "uid://c0lhfaavm4i0o"

[node name="Move" type="Node" parent="StateMachine" node_paths=PackedStringArray("idle_state", "move_sound_stream")]
script = ExtResource("15_8716e")
idle_state = NodePath("../Idle")
move_sound_stream = NodePath("../../MoveAudioStreamPlayer")
metadata/_custom_type_script = "uid://c0lhfaavm4i0o"

[node name="Hide" type="Node" parent="StateMachine" node_paths=PackedStringArray("idle_state", "move_state")]
script = ExtResource("9_bgy4a")
idle_state = NodePath("../Idle")
move_state = NodePath("../Move")
metadata/_custom_type_script = "uid://c0lhfaavm4i0o"

[node name="MoveAudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("8_ob8v4")
volume_db = -6.0
